<!-- so the partial is being called from ajax (?) and has access to 
  variables that were set up in the page originally, plus the
  ruby variables established by the controller method that renders this
-->
<script>

  var seriesdat;
  <%= "#{@coptsvarname}" -%>.series = []
  <% @sdata.each do |sdat| -%>
      seriesdat = {
      name: "<%= @snames.shift -%>",
      data: <%= sdat.to_json %> };

      <%= "#{@coptsvarname}.plotOptions.series.pointStart = #{@hertzper};" -%>
      <%= "#{@coptsvarname}.plotOptions.series.pointInterval = #{@hertzper};" -%>
      <%= "#{@coptsvarname}" -%>.series.push( seriesdat );
  <% end -%>

  new Highcharts.Chart( <%= "#{@coptsvarname}" -%> );

</script>
